<%= render 'shared/errors', obj: @sku_list if @sku_list.present? %>
<div class="row">
  <div class="col-sm-6 col-md-2">
    <div class="list_div">
      <%= @list.name %>
      <small id="sm01" class="js-private <%= "hidden" if !@list.private? %>" data-list="<%= @list.id %>" title="Click to change status" >
    	  private
      </small>
      <small id="sm01" class="js-visible <%= "hidden" if @list.private? %>" data-list="<%= @list.id %>" title="Click to change status">
    	  visible
      </small>
      <%= form_tag add_product_list_path(@list), method: :post do %>
        <div class="form-group">
          <div class="col-sm-10 col-sm-offset-1">
            <%= text_field_tag :skuid, params[:skuid], placeholder: "skuid", autofocus: true %>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-2 col-sm-offset-4">
            <%= button_tag(type: :submit, class: "btn btn-sm btn-primary") do %>
              Search
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
   <% @products.each do |product| %>
    <div class="col-sm-6 col-md-2">
      <div class="list_div">
        <%= link_to remove_product_list_path(@list, skuid: product.id), class: "btn btn-xs", 
         method: :put, data: {confirm: "Are you sure you want to delete this list?"} do %>
        <span class="glyphicon glyphicon-remove"></span>
      <% end %>
        <div>
          <img src="<%= product.images["main"]%>">
        </div>
        <div>
          <%= product.name %>
        </div>  
      </div>
    </div>
  <% end %>
</div>

<script type="text/javascript">
  $(document).ready(function() {
    $(".js-visible, .js-private").on('click', function(){
      $.ajax({
        url:"/lists/"+$(this).data("list")+"/flop",
        success: function(data){
          $(".js-private").toggleClass("hidden");
          $(".js-visible").toggleClass("hidden");
        }
      });
    }); 
  });
</script>